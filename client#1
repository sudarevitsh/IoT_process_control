#include <ESP8266WiFi.h>
#include <ESP8266HTTPClient.h>

const char* ssid = "FinalProject";
const char* pass = "12345678";

void setup(){
  Serial.begin (115200);
  WiFi.begin(ssid, pass); 
  
  Serial.println("Connecting..");
  while(WiFi.status() != WL_CONNECTED){
    delay(100);
    Serial.println(".");
    }
  if (WiFi.status() == WL_CONNECTED){  
    Serial.println("Connected!");
    delay(500);
    }
  }
  
  void loop(){
  
  Serial.println("Sending message to server:");
  delay(50);

  HTTPClient http;
  boolean client_free = true;
  
  if(client_free == true){
    String free_str = "true";
    String getData = "?status=" + free_str;
    String link = "http://8.8.8.8/client1.php" + getData;
  
    http.begin(link);
    int httpCode = http.GET();
    String new_job = http.getString();
  
    Serial.println (httpCode);
    Serial.print ("New job:");
    Serial.println (new_job);
  
    client_free=false;
  
    http.end();
  }
  
  //DO NEW JOB
  
  //WHEN DONE SET FREE = TRUE
  
  }
